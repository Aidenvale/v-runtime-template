{"version":3,"file":"v-runtime-template.es.js","sources":["../index.js"],"sourcesContent":["const defineDescriptor = (src, dest, name) => {\n  if (!dest.hasOwnProperty(name)) {\n    const descriptor = Object.getOwnPropertyDescriptor(src, name);\n    Object.defineProperty(dest, name, descriptor);\n  }\n};\n\nconst merge = objs => {\n  const res = {};\n  objs.forEach(obj => {\n    obj &&\n      Object.getOwnPropertyNames(obj).forEach(name =>\n        defineDescriptor(obj, res, name)\n      );\n  });\n  return res;\n};\n\nconst buildFromProps = (obj, props) => {\n  const res = {};\n  props.forEach(prop => defineDescriptor(obj, res, prop));\n  return res;\n};\n\nexport default {\n  props: {\n    template: String,\n    parent: Object\n  },\n  render(h) {\n    if (this.template) {\n      const parent = this.parent || this.$parent\n      const {\n        $data: parentData = {},\n        $props: parentProps = {},\n        $options: parentOptions = {}\n      } = parent;\n      const {\n        components: parentComponents = {},\n        computed: parentComputed = {},\n        methods: parentMethods = {}\n      } = parentOptions;\n      const {\n        $data = {},\n        $props = {},\n        $options: { methods = {}, computed = {}, components = {} } = {}\n      } = this;\n      const passthrough = {\n        $data: {},\n        $props: {},\n        $options: {},\n        components: {},\n        computed: {},\n        methods: {}\n      };\n\n      //build new objects by removing keys if already exists (e.g. created by mixins)\n      Object.keys(parentData).forEach(e => {\n        if (typeof $data[e] === \"undefined\")\n          passthrough.$data[e] = parentData[e];\n      });\n      Object.keys(parentProps).forEach(e => {\n        if (typeof $props[e] === \"undefined\")\n          passthrough.$props[e] = parentProps[e];\n      });\n      Object.keys(parentMethods).forEach(e => {\n        if (typeof methods[e] === \"undefined\")\n          passthrough.methods[e] = parentMethods[e];\n      });\n      Object.keys(parentComputed).forEach(e => {\n        if (typeof computed[e] === \"undefined\")\n          passthrough.computed[e] = parentComputed[e];\n      });\n      Object.keys(parentComponents).forEach(e => {\n        if (typeof components[e] === \"undefined\")\n          passthrough.components[e] = parentComponents[e];\n      });\n\n      const methodKeys = Object.keys(passthrough.methods || []);\n      const dataKeys = Object.keys(passthrough.$data || {});\n      const propKeys = Object.keys(passthrough.$props || {});\n      const allKeys = dataKeys.concat(propKeys).concat(methodKeys);\n      const methodsFromProps = buildFromProps(parent, methodKeys);\n      const finalProps = merge([\n        passthrough.$data,\n        passthrough.$props,\n        methodsFromProps\n      ]);\n\n      const dynamic = {\n        template: this.template || \"<div></div>\",\n        props: allKeys,\n        computed: passthrough.computed,\n        components: passthrough.components\n      };\n\n      return h(dynamic, { props: finalProps });\n    }\n  }\n};\n"],"names":["const","defineDescriptor","src","dest","name","hasOwnProperty","descriptor","Object","getOwnPropertyDescriptor","defineProperty","props","template","String","parent","render","h","this","$parent","passthrough","$data","$props","$options","components","computed","methods","keys","parentData","forEach","e","parentProps","parentMethods","parentComputed","parentComponents","methodKeys","dataKeys","propKeys","allKeys","concat","methodsFromProps","obj","res","prop","finalProps","objs","getOwnPropertyNames","merge"],"mappings":"AAAAA,IAAMC,WAAoBC,EAAKC,EAAMC,OAC9BD,EAAKE,eAAeD,GAAO,KACxBE,EAAaC,OAAOC,yBAAyBN,EAAKE,GACxDG,OAAOE,eAAeN,EAAMC,EAAME,mBAqBvB,CACbI,MAAO,CACLC,SAAUC,OACVC,OAAQN,QAEVO,gBAAOC,MACDC,KAAKL,SAAU,KACXE,EAASG,KAAKH,QAAUG,KAAKC,iCAEb,kCACE,oCACI,sCAGK,oCACJ,mCACF,UAMvBD,0BAHM,UAGNA,2BAFO,UAEPA,6BAD2D,IAAnD,+BAAY,oCAAe,sCAAiB,QAElDE,EAAc,CAClBC,MAAO,GACPC,OAAQ,GACRC,SAAU,GACVC,WAAY,GACZC,SAAU,GACVC,QAAS,IAIXjB,OAAOkB,KAAKC,GAAYC,iBAAQC,QACN,IAAbT,EAAMS,KACfV,EAAYC,MAAMS,GAAKF,EAAWE,MAEtCrB,OAAOkB,KAAKI,GAAaF,iBAAQC,QACN,IAAdR,EAAOQ,KAChBV,EAAYE,OAAOQ,GAAKC,EAAYD,MAExCrB,OAAOkB,KAAKK,GAAeH,iBAAQC,QACP,IAAfJ,EAAQI,KACjBV,EAAYM,QAAQI,GAAKE,EAAcF,MAE3CrB,OAAOkB,KAAKM,GAAgBJ,iBAAQC,QACP,IAAhBL,EAASK,KAClBV,EAAYK,SAASK,GAAKG,EAAeH,MAE7CrB,OAAOkB,KAAKO,GAAkBL,iBAAQC,QACP,IAAlBN,EAAWM,KACpBV,EAAYI,WAAWM,GAAKI,EAAiBJ,UAG3CK,EAAa1B,OAAOkB,KAAKP,EAAYM,SAAW,IAChDU,EAAW3B,OAAOkB,KAAKP,EAAYC,OAAS,IAC5CgB,EAAW5B,OAAOkB,KAAKP,EAAYE,QAAU,IAC7CgB,EAAUF,EAASG,OAAOF,GAAUE,OAAOJ,GAC3CK,GAhEYC,EAgEsB1B,EA/DtC2B,EAAM,GA+DwCP,EA9D9CN,iBAAQc,UAAQxC,EAAiBsC,EAAKC,EAAKC,KAC1CD,GA8DGE,WA5EEC,OACNH,EAAM,SA2EiB,CACvBtB,EAAYC,MACZD,EAAYE,OACZkB,GA7EDX,iBAAQY,GACXA,GACEhC,OAAOqC,oBAAoBL,GAAKZ,iBAAQvB,UACtCH,EAAiBsC,EAAKC,EAAKpC,OAG1BoC,EAoEgBK,UAaZ9B,EAPS,CACdJ,SAAUK,KAAKL,UAAY,cAC3BD,MAAO0B,EACPb,SAAUL,EAAYK,SACtBD,WAAYJ,EAAYI,YAGR,CAAEZ,MAAOgC,QA9ETH,EAChBC"}